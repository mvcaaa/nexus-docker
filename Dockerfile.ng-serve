FROM mhart/alpine-node:latest

ENV IMAGE_VERSION 0.2

RUN apk add --no-cache bash curl

RUN echo fs.inotify.max_user_watches=524288 | tee -a /etc/sysctl.conf && sysctl -p

RUN npm install -g gulp ;\
    npm install -g @angular/cli

RUN mkdir -p /opt/npm
WORKDIR /opt/npm
RUN curl --insecure -H="Authorization: token $GITHUB_API_KEY" -H="Accept:application/vnd.github.v3.raw" -O https://api.github.com/repos/Enkora/nexus/contents/nexus_ng/package.json?ref=develop
RUN npm install
